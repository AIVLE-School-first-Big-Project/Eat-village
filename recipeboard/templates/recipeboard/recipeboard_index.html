<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>

<br>레시피 게시판 입니다.<br>

<main>
{% comment %} 정렬순서 {% endcomment %}
{% if kw %}
{% comment %} 키워드 검색시 정렬기능 없음 {% endcomment %}
{% else %}
<div class= "container">
    <select id="so-select" onchange="location=this.value">
        {% if so == '' %}
        <option hidden class="so-date" value="/recipeboard">최신순</option>
        <option class="so-view" value="?so=view">조회순</option>
        <option class="so-recommended" value="?so=recommended">추천순</option>
        {% elif so == 'view' %}
        <option hidden class="so-view" value="?so=view">조회순</option>
        <option class="so-date" value="/recipeboard">최신순</option>
        <option class="so-recommended" value="?so=recommended">추천순</option>
        {% elif so == 'recommended'%}
        <option hidden class="so-recommended" value="?so=recommended">추천순</option>
        <option class="so-date" value="/recipeboard">최신순</option>
        <option class="so-view" value="?so=view">조회순</option>
        {% endif %}
    </select>
</div>
{% endif %}

{% comment %} 글쓰기버튼 {% endcomment %}
<div class="container">
    <a href="{% url 'recipeboard:recipeboard_create' %}">글쓰기</a>
</div>

{% comment %} 게시물 표시되는곳 {% endcomment %}
{% if kw %}
    <br>{{kw}}에 대한 검색결과입니다!<br>
{% endif %}
<div class="container">
<table class="table table-sm">
    <thead>
    <tr>
        <th>#</th>
        <th>제목</th>
        <th>작성자</th>
        <th>날짜</th>
        <th>조회수</th>
        <th>추천수</th>
    </tr>
    </thead>
    <tbody>
    {% if board_list %}
        {% for board in board_list%}
        <tr>
            <td>{{board.boardid}}</td>
            <td><a href="{% url 'recipeboard:recipeboard_detail' board.boardid %}">{{board.title}}</a></td>
            <td>{{board.userid.nickname}}</td>
            {% if board.time.date == today %}
            <td>{{board.time|time}}</td>
            {% else %}
            <td>{{board.time|date}}</td>
            {% endif %}
            <td>{{board.view}}</td>
            <td>{{board.recommended}}</td>
        </tr>
        {% endfor %}
        {% else %}
        <br>표시할 게시물이 없습니다!<br>
    {% endif %}
    </tbody>
</table>
</div>

<div class="container">
<form action="{% url 'recipeboard:recipeboard_index' %}" method="get">
    <div class="text-center">
    <ul class="pagination">
        {% if board_list.has_previous %}
          <li><a href="?page=1&kw={{kw}}"><<</a></li>
          <li><a href="?page={{board_list.previous_page_number}}&kw={{kw}}"><</a></li>
        {% endif %}
        <span>{{board_list.number}} / {{board_list.paginator.num_pages}}</span>
        {% if board_list.has_next %}
          <li><a href="?page={{board_list.next_page_number}}&kw={{kw}}">></a></li>
          <li><a href="?page={{board_list.paginator.num_pages}}&kw={{kw}}">>></a></li>
        {% endif %}
    </ul>
    </div>
    <div>
    <input type="text" name="kw" value="{{ kw }}">
    <input type="submit" value="검색">
    </div>
</form>
</div>

</main>
</html>